<!DOCTYPE html>
<html class="writer-html5" lang="is" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VERKEFNI &mdash; Valin efni í stærðfræði og reiknifræði 2021</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/python.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/edbook.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_2.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/translations.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>

<!-- hoverrole.py css code -->
<style type="text/css">
    a.tooltip {
        outline: none;
        border-bottom: thin dotted;
        background: #ffeedd
    }

    a.tooltip strong {
        line-height: 30px;
    }

    a.tooltip:hover {
        text-decoration: none;
    }

    a.tooltip span {
        z-index: 10;
        display: none;
        padding: 14px 20px;
        margin-top: -30px;
        margin-left: 12px;
        width: 310px;
        line-height: 16px;
    }

    a.tooltip:hover span {
        display: inline;
        position: absolute;
        color: #111;
        border: 1px solid #DCA;
        background: #fffAF0;
    }

    .callout {
        z-index: 20;
        position: absolute;
        top: 30px;
        border: 0;
        left: -12px;
    }

    /*CSS3*/
    a.tooltip span {
        border-radius: 4px;
        box-shadow: 5px 5px 8px #CCC;
    }
</style>
<!-- End hoverrole.py css code -->

<style type="text/css">
    .sagecell .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
    }

    .sagecell .CodeMirror {
        height: auto;
    }

    /* - Begin equation reference style - */
    h6.eqno {
        display: inline-block;
        padding-left: 10px;
    }

    h6 .headerlink {
        display: inline-block !important;
    }

    h6 .headerlink:after {
        visibility: hidden !important;
    }

    h6 .headerlink:hover:after {
        visibility: visible !important;
    }

    .eqno:hover>.headerlink:after {
        visibility: visible !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    /* - End - */
</style>
<style type="text/css">
    /* .ace_content .ace_layer .ace_line_group .ace_line * { */
    /*     font-size: 15px !important; */
    /* } */
    /* div[class^='highlight'] pre {font-size:15px} */
    div.code-block-caption {
        margin-bottom: 4px
    }
</style>

    <link rel="index" title="Atriðaskrá" href="../genindex/" />
    <link rel="search" title="Leit" href="../search/" />
    <link rel="prev" title="VIÐAUKI A: Python-teikning tvívíðra falla" href="../vidauki-A/" />



<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>


 

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Valin efni í stærðfræði og reiknifræði
              <img src="../_static/hi_horiz_raunvisindadeild.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../kafli01/">1  Föll af mörgum breytistærðum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli02/">2  Línuleg algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli03/">3  Flokkun vigra</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../vidauki-A/">VIÐAUKI A: Python-teikning tvívíðra falla</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">VERKEFNI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vv1-hlutafleiur-og-stiglar">VV1. Hlutafleiður og stiglar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv2-formengi-og-utgildi">VV2. Formengi og útgildi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv3-fall-rosenbrocks">VV3. Fall Rosenbrocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv4-prof-i-staerfraei-og-reiknifraei-2019">VV4. Próf í stærðfræði og reiknifræði 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv5-flokkun-veurgagna-me-k-means-reikniriti">VV5. Flokkun veðurgagna með k-means reikniriti</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv6-hlutaprof-2-vori-2021">VV6. Hlutapróf 2 vorið 2021</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv7-lagmorkun-rosenbrock-fallsins">VV7. Lágmörkun Rosenbrock-fallsins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vv8-jarskjalftar-og-eldgos-a-reykjanesskaga-2021">VV8. Jarðskjálftar og eldgos á Reykjanesskaga 2021</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Valin efni í stærðfræði og reiknifræði</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">VERKEFNI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/verkefni.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="verkefni">
<h1>VERKEFNI<a class="headerlink" href="#verkefni" title="Permalink to this heading"></a></h1>
<section id="vv1-hlutafleiur-og-stiglar">
<h2>VV1. Hlutafleiður og stiglar<a class="headerlink" href="#vv1-hlutafleiur-og-stiglar" title="Permalink to this heading"></a></h2>
<p>Reiknið með blaði og blýanti (og sýnið útreikninga eftir því sem við á):</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(f_x\)</span> ef <span class="math notranslate nohighlight">\(f(x,y) = e^{xy}\log(xy)\)</span> <p style="margin-bottom:6pt;"></p></p></li>
<li><p><span class="math notranslate nohighlight">\(D_y \left((x+y^3)^5 - \sin(x-y)\right)\)</span> <p style="margin-bottom:6pt;"></p></p></li>
<li><p><span class="math notranslate nohighlight">\(\dfrac{\partial}{\partial z} \dfrac{\log(xz)}{z^2}\)</span> <p style="margin-bottom:6pt;"></p></p></li>
<li><p><span class="math notranslate nohighlight">\(\nabla f\)</span> ef <span class="math notranslate nohighlight">\(f(x,y) = x^2y + xy + y^3\)</span> <p style="margin-bottom:6pt;"></p></p></li>
<li><p><span class="math notranslate nohighlight">\(\nabla f(1,2)\)</span> ef <span class="math notranslate nohighlight">\(f\)</span> er fallið í lið 4 <p style="margin-bottom:6pt;"></p></p></li>
<li><p>hlutafleiður fallsins <span class="math notranslate nohighlight">\(f(x,y) = (x+1) \exp(y-x) - 3y\sin(xy)\)</span></p></li>
</ol>
</section>
<section id="vv2-formengi-og-utgildi">
<h2>VV2. Formengi og útgildi<a class="headerlink" href="#vv2-formengi-og-utgildi" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>Ákvarðið stærsta mögulegt formengi fallsins</p>
<div class="math notranslate nohighlight">
\[f(x,y) = \sqrt{x^2-5x+6}\sqrt{y^2+5y-6}\]</div>
</li>
<li><p>Gefið er fallið</p>
<div class="math notranslate nohighlight">
\[g(x,y) = 4x^2 - 4xy + 2y^2 + 10x - 6y\]</div>
<p>Fallið hefur einn útgildispunkt sem ákvarða skal (með blaði og blýanti). Er
hann lággildi eða hágildi? (rökstyðjið)</p>
</li>
</ol>
</section>
<section id="vv3-fall-rosenbrocks">
<h2>VV3. Fall Rosenbrocks<a class="headerlink" href="#vv3-fall-rosenbrocks" title="Permalink to this heading"></a></h2>
<p>Í æfingu í kafla <a class="reference internal" href="../vidauki-A/#teikning-stigla"><span class="std std-ref">A3</span></a> er „Fall Rosenbrocks“ skilgreint og
sýnd mynd af því. Fallið er:</p>
<div class="math notranslate nohighlight">
\[f(x, y) = (1 - x)^2 + 100(y - x^2)^2\]</div>
<ol class="arabic">
<li><p>Skrifið fall <code class="docutils literal notranslate"><span class="pre">rosen(x,y)</span></code> til að reikna gildi fallsins. Prófið að reikna
<span class="math notranslate nohighlight">\(f(-1.2, 1)\)</span> sem ætti að gefa 24.2.</p></li>
<li><p>Teiknið hæðarlínumynd af Rosenbrock-fallinu með <code class="docutils literal notranslate"><span class="pre">plt.contour</span></code> á svæðinu
<span class="math notranslate nohighlight">\([-2,2] \times [-1,3]\)</span>. Látið hæðarlínurnar vera dökkbláar, merkið þær líkt
og gert er í sýnidæminu <em>Hæðarlínur falls</em> í kafla A1, og  hafið netlínur (<em>grid</em>)
með. Til að fá góða mynd þarf bæði að reikna fallið á þéttu neti (t.d. <span class="math notranslate nohighlight">\(300
\times 300)\)</span> og velja hæðarlínugildin, sem fást með stikanum <code class="docutils literal notranslate"><span class="pre">levels</span></code> vel.
Gildin <span class="math notranslate nohighlight">\(0.2, 2^2, 6^2, 10^2,\ldots, 46^2\)</span> gefa t.d. ágæta mynd. Þau má búa
til með:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">np.append([0.2],</span> <span class="pre">np.arange(2,50,4)**2)</span></code></p>
</div></blockquote>
</li>
</ol>
</section>
<section id="vv4-prof-i-staerfraei-og-reiknifraei-2019">
<h2>VV4. Próf í stærðfræði og reiknifræði 2019<a class="headerlink" href="#vv4-prof-i-staerfraei-og-reiknifraei-2019" title="Permalink to this heading"></a></h2>
<p>Athugið að í þessu prófi voru engin hjálpargögn leyfileg nema reiknivél og
formúlublað.</p>
<p class="rubric">A. Python forrit</p>
<ol class="arabic simple">
<li><p>Skrifið Python fall með tvo stika, <span class="math notranslate nohighlight">\(a\)</span> og <span class="math notranslate nohighlight">\(n\)</span>. Ef <span class="math notranslate nohighlight">\(a &lt; 0\)</span> á
fallið að skila <span class="math notranslate nohighlight">\(a^n\)</span> en ef <span class="math notranslate nohighlight">\(a \geq 0\)</span> á það að skila
<span class="math notranslate nohighlight">\(\sqrt{a^n+a}\)</span>. Skrifið tilheyrandi Python forrit sem kallar á fallið
með <span class="math notranslate nohighlight">\(a=2\)</span>, <span class="math notranslate nohighlight">\(n=7\)</span> og með <span class="math notranslate nohighlight">\(a=-2\)</span>, <span class="math notranslate nohighlight">\(n=3\)</span> og skrifar út
niðurstöðu þess í báðum tilvikum.</p></li>
<li><p>Skrifið Python fall eða reiknirit sem tekur inn einhvern lista af tölum og
skilar staðsetningu fyrstu tölunnar sem uppfyllir jöfnuna <span class="math notranslate nohighlight">\(x^5 + x =
246\)</span>. Ef engin slík tala finnst á fallið að skila –1. Skrifið tilsvarandi
forrit eða reiknirit sem prófar fallið með listanum <code class="docutils literal notranslate"><span class="pre">[5,</span> <span class="pre">4,</span> <span class="pre">3,</span> <span class="pre">2,</span> <span class="pre">1]</span></code>.</p></li>
</ol>
<p class="rubric">B. Gagnasafn</p>
<p>Gefin eru gögn <span class="math notranslate nohighlight">\((x_i, y_i), i=1,\ldots, n\)</span>.</p>
<ol class="arabic simple">
<li><p>Skrifið formúlu falls sem hægt væri að lágmarka til að ákvarða bestu línu
fyrir gagnasafnið. Teiknið skýringarmynd.</p></li>
<li><p>Skrifið formúlu falls sem lágmarka mætti til að ákvarða bestu parabólu fyrir gagnasafnið.</p></li>
<li><p>Nú kemur í ljós að <span class="math notranslate nohighlight">\(y\)</span> er ekki bara háð <span class="math notranslate nohighlight">\(x\)</span> heldur líka tímanum.
Fyrir hvern punkt <span class="math notranslate nohighlight">\((x_i, y_i)\)</span> er gefinn tími, <span class="math notranslate nohighlight">\(t_i\)</span>, og
markmiðið er að smíða aðhvarfslíkan sem lýsir gögnunum sem best. Hvað kemur
til greina að gera, og hvaða fall væri hægt að lágmarka? Hvaða stikar koma
við sögu?</p></li>
</ol>
<p class="rubric">C. Hlutafleiður</p>
<ol class="arabic simple">
<li><p>Finnið hlutafleiðuna <span class="math notranslate nohighlight">\(D_x (x^2 + y)^6 + e^{y-x}\)</span></p></li>
<li><p>Finnið stigul fallsins <span class="math notranslate nohighlight">\(f(x,y) = x^3 + xy - y^3\)</span></p></li>
<li><p>Finnið fyrsta stigs Taylor-nálgun við <span class="math notranslate nohighlight">\(f\)</span> í punktinum <span class="math notranslate nohighlight">\((1, 2)\)</span>.</p></li>
</ol>
<p class="rubric">D. Vigrar</p>
<ol class="arabic simple">
<li><p>Sýnið að vigrarnir <span class="math notranslate nohighlight">\(a = (1, 2, 3)\)</span>, <span class="math notranslate nohighlight">\(b= (4, 2, 0)\)</span> og <span class="math notranslate nohighlight">\(c =
(1, 0, 1)\)</span> séu línulega óháðir.</p></li>
<li><p>Hve margar gráður er hornið milli <span class="math notranslate nohighlight">\(a\)</span> og <span class="math notranslate nohighlight">\(b\)</span>?</p></li>
<li><p>Finnið vigur <span class="math notranslate nohighlight">\(d\)</span> þannig að <span class="math notranslate nohighlight">\(a\)</span>, <span class="math notranslate nohighlight">\(b\)</span> og <cite>d</cite> verði línulega háðir.</p></li>
<li><p>Nokkrir ætla að leggja í púkk til að kaupa hlut. Ef hver borgar átta peninga
eru þrír peningar afgangs en ef hver borgar sjö vantar fjóra upp á. Þetta
dæmi mætti leysa með því að leysa jöfnu <span class="math notranslate nohighlight">\(Ax=b\)</span> þar sem <span class="math notranslate nohighlight">\(A\)</span> er
<span class="math notranslate nohighlight">\(2 \times 2\)</span> fylki og <span class="math notranslate nohighlight">\(b \in \Bbb{R}^2\)</span>. Ákvarðið <span class="math notranslate nohighlight">\(A\)</span> og
<span class="math notranslate nohighlight">\(b\)</span> (ekki skal leysa jöfnuna).</p></li>
</ol>
<p class="rubric">E. Stofnstærð</p>
<p>Tegund lifir í max 3 ár. Hver núll-ára gefur 0.2 núll-ára afkvæmi árið eftir, hver eins árs 0.6 afkvæmi ári síðar og hver tveggja ára 0.8. 20% núll-ára eru dauð ári seinna, og dánartíðni eins árs er 50%. Í upphafi er stofnstærðin 2000 einstaklingar, 1000 núll-ára, 600 eins árs og 400 tveggja ára.</p>
<ol class="arabic simple">
<li><p>Ákvarðið Leslie-fylki fyrir þennan stofn.</p></li>
<li><p>Ákvarðið stofnstærð eftir eitt ár</p></li>
<li><p>Lýsið með orðum og/eða jöfnum aðferð sem nota mætti til að ákvarða hvort
stofninn muni að lokum deyja út.</p></li>
</ol>
</section>
<section id="vv5-flokkun-veurgagna-me-k-means-reikniriti">
<h2>VV5. Flokkun veðurgagna með k-means reikniriti<a class="headerlink" href="#vv5-flokkun-veurgagna-me-k-means-reikniriti" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Lesið skrána <a class="reference external" href="http://cs.hi.is/python/hiti-urkoma.txt">http://cs.hi.is/python/hiti-urkoma.txt</a> inn í þrjá vigra: ár,
hiti, úrkoma. Búið svo til <span class="math notranslate nohighlight">\(n \times 2\)</span> fylki úr hita og úrkomu (t.d.
með <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">=</span> <span class="pre">np.c_[...]</span></code>), staðlið það með <code class="docutils literal notranslate"><span class="pre">whiten</span></code> og flokkið í fjóra hópa
með k-means reikniritinu. Hafið <code class="docutils literal notranslate"><span class="pre">npr.seed()</span></code> með svo sömu flokkar fáist við
endurteknar keyrslur. Hverjir eru miðpunktar hópanna og hvað eru mörg ár í
hverjum hópi?</p></li>
<li><p>Teiknið mynd af hópunum eins og gert er í sýnidæminu í kafla
<a class="reference internal" href="../kafli03/#kmeans"><span class="std std-numref">3.6</span></a>; merkið m.a. miðpunktana inn með stjörnum. Notið <code class="docutils literal notranslate"><span class="pre">qcmap</span></code>
til að velja liti og bætið svo við rúðuneti og ásamerkingum sbr. aftasta
sýnidæmið í kafla <a class="reference internal" href="../vidauki-A/#litastikur"><span class="std std-ref">A5</span></a> í Viðauka A. Bætið loks við
litastiku eins og þar er gert sem sýnir flokkun áranna, en þau ættu að
flokkast gróflega í þurr, blaut, heit og köld.</p></li>
<li><p>Teiknið nú nýja mynd þar sem árin eru flokkuð í 10 hópa. Merkið hópana
á litastiku þessarar myndar með tölunum 1–10 og setjið <code class="docutils literal notranslate"><span class="pre">label</span></code> á
stikuna: <strong>Flokkur</strong>. Látið litastiku þessarar myndar líka vera breiðari
en á myndinni í lið 2.</p></li>
</ol>
</section>
<section id="vv6-hlutaprof-2-vori-2021">
<h2>VV6. Hlutapróf 2 vorið 2021<a class="headerlink" href="#vv6-hlutaprof-2-vori-2021" title="Permalink to this heading"></a></h2>
<p class="rubric">A. Stiglar og lágmörkun</p>
<p>Gefið er fallið</p>
<div class="math notranslate nohighlight">
\[f(x,y) = x^2y + 2xy^2 - 3xy + 4\]</div>
<p>punkturinn <span class="math notranslate nohighlight">\(p = (1,1)\)</span> og vigurinn <span class="math notranslate nohighlight">\(u = (-1,-1)\)</span>.</p>
<ol class="arabic simple">
<li><p>Ákvarðið stigul <span class="math notranslate nohighlight">\(f\)</span> (þ.e.a.s. <span class="math notranslate nohighlight">\(\nabla f\)</span>), skrifið Python-fall
sem finnur hann og notið það til að reikna <span class="math notranslate nohighlight">\(\nabla f(p)\)</span></p></li>
<li><p>Lát <span class="math notranslate nohighlight">\(u = (-1,-1)\)</span>. Notið Python-fallið úr a-lið líka til að reikna
stefnuafleiðu <span class="math notranslate nohighlight">\(f\)</span> í stefnu <span class="math notranslate nohighlight">\(u\)</span> í punktinum <span class="math notranslate nohighlight">\(p\)</span>. Búið líka
til einhvern punkt og vigur úr afmælisdegi ykkar og reiknið tilsvarandi
stefnuafleiðu.</p></li>
<li><p>Lát <span class="math notranslate nohighlight">\(u = (-1,-1)\)</span>. Notið Python-fallið úr a-lið líka til að reikna
stefnuafleiðu <span class="math notranslate nohighlight">\(f\)</span> í stefnu <span class="math notranslate nohighlight">\(u\)</span> í punktinum <span class="math notranslate nohighlight">\(p\)</span>. Búið líka
til einhvern punkt og vigur úr afmælisdegi ykkar og reiknið tilsvarandi
stefnuafleiðu.</p></li>
<li><p>Teiknið að lokum hæðarlínur <span class="math notranslate nohighlight">\(f\)</span> á svæðinu <span class="math notranslate nohighlight">\([0,3] \times [0,2]\)</span>.</p></li>
</ol>
<p class="rubric">B. Er punktur í plani?</p>
<p>Í þessu dæmi á að skrifa Python-fall til að kanna hvort gefinn punktur liggi í gefnu plani í þrívíðu rúmi. Vegna þess að Python reiknar með endanlegri nákvæmni verður að láta duga að athuga hvort punkturinn sé í planinu eða mjög nálægt því.</p>
<ol class="arabic">
<li><p>Skrifið Python-fall <code class="docutils literal notranslate"><span class="pre">næstum_eins(u,v)</span></code> sem skilar sönnu (<code class="docutils literal notranslate"><span class="pre">True</span></code>) ef
<span class="math notranslate nohighlight">\(u \approx v\)</span> í þeim skilningi að fjarlægðin milli vigranna <span class="math notranslate nohighlight">\(u\)</span>
og <span class="math notranslate nohighlight">\(v\)</span> sé minni en <span class="math notranslate nohighlight">\(10^{-8}\)</span>, en annars ósönnu (<code class="docutils literal notranslate"><span class="pre">False</span></code>).
Prófið með pari vigra sem eru ólíkir og pari mjög líkra vigra.</p></li>
<li><p>Í kafla <a class="reference internal" href="../kafli02/#verstalair-grunnar"><span class="std std-numref">2.11</span></a> er gefið skilyrði (merkt
<span class="math notranslate nohighlight">\((*)\)</span>), sem nota má til að kanna hvort punktur (eða vigur) <span class="math notranslate nohighlight">\(u\)</span> sé
í planinu sem tveir þverstaðlaðir vigrar <span class="math notranslate nohighlight">\(a\)</span> og <span class="math notranslate nohighlight">\(b\)</span> spanna, sbr.
sýnidæmið aftast í greininni. Fyrir tvo vigra segir reglan að það gildi
þ.þ.a.a.</p>
<div class="math notranslate nohighlight">
\[u = (a\cdot u)a + (b\cdot u)b\]</div>
<p>Skrifið Python-fall <code class="docutils literal notranslate"><span class="pre">í_plani(u,a,b)</span></code> þar sem stikarnir eru vigrar í
<span class="math notranslate nohighlight">\(\Bbb R^3\)</span> og <span class="math notranslate nohighlight">\(\{a,b\}\)</span> er þverstaðlaður grunnur. Það á að nota
fallið úr a-lið til að rannsaka hvort <span class="math notranslate nohighlight">\(u\)</span> sé (næstum) í planinu sem
<span class="math notranslate nohighlight">\(a\)</span> og <span class="math notranslate nohighlight">\(b\)</span> spanna.</p>
</li>
<li><p>Prófið fallið úr b-lið með vigrunum og punktunum sem gefnir eru í sýnidæminu,
sem sé <span class="math notranslate nohighlight">\(a = (0.48, 0.64, 0.60)\)</span>, <span class="math notranslate nohighlight">\(b = (0.8, -0.6, 0)\)</span>, og svo:</p>
<p><span class="math notranslate nohighlight">\(a)\)</span> <span class="math notranslate nohighlight">\(u=A=(4,2,3)\)</span> (í planinu) og <br>
<span class="math notranslate nohighlight">\(b)\)</span> <span class="math notranslate nohighlight">\(u=B=(6,3,2)\)</span> (ekki í planinu).</p>
</li>
</ol>
<p class="rubric">C. Efnisspurningar</p>
<ol class="arabic">
<li><p>Skilgreinið graf tvívíðs falls (annaðhvort með orðum eða formúlu).</p></li>
<li><p>Gerðar eru daglegar mælingar á loftmengun á fimm stöðum í Reykjavík.
Mælingarnar felast í að mæla styrk svifryks með tveimur kornastærðum auk
fjögurra mengandi lofttegunda. Eitt fylki geymir mælingar á hverjum stað í
hverjum mánuði. Hvað þarf stórt fylki til að geyma mælingar á Grensásvegi í
apríl?</p></li>
<li><p>Reynt er að lýsa styrk brennisteinstvíoxíðs við Grensásveg sem falli af
vindhraða í m/s og hitastigi í °C. Hvaða formengi væri skynsamlegt að nota
til að teikna fallið ef ætlunin er að fanga flest veðurskilyrði, en ekki
endilega öll.</p></li>
<li><p>Hver er munurinn á vigursviði og skalarsviði?</p></li>
<li><p>Lát <span class="math notranslate nohighlight">\(f\colon\Bbb R^2\to\Bbb R\)</span>. Gerið grein fyrir muninum á almennu
hlutafleiðunni <span class="math notranslate nohighlight">\(\dfrac{\partial f}{\partial x}\)</span> og hlutafleiðunni í
tilteknum punkti, <span class="math notranslate nohighlight">\(\dfrac{\partial f(a,b)}{\partial x}\)</span></p></li>
<li><p>Hver eftirfarandi falla <span class="math notranslate nohighlight">\(f\colon\Bbb R^4\to\Bbb R\)</span> eru línuleg? (Það
þarf ekki að rökstyðja svörin, bara svara rétt).</p>
<p><span class="math notranslate nohighlight">\(a)\)</span> <span class="math notranslate nohighlight">\(f(x) = x\cdot x\)</span> <br>
<span class="math notranslate nohighlight">\(b)\)</span> <span class="math notranslate nohighlight">\(f(x) = (3,4,5)\cdot x\)</span> <br>
<span class="math notranslate nohighlight">\(c)\)</span> <span class="math notranslate nohighlight">\(f(x) = \text{staðalfrávik }x\)</span> <br>
<span class="math notranslate nohighlight">\(d)\)</span> <span class="math notranslate nohighlight">\(f(x) = \text{minnsta stak }x\)</span> <br>
<span class="math notranslate nohighlight">\(e)\)</span> <span class="math notranslate nohighlight">\(f(x) = \text{aftasta stak }x\)</span> <br> <br></p>
</li>
<li><p>Greindar hafa verið 3 Íslendingasögur með orðtíðni. Hornin á milli þeirra eru
sýnd í eftirfarandi töflu:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Saga</strong></p></th>
<th class="head"><p>A</p></th>
<th class="head"><p>B</p></th>
<th class="head"><p>C</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>A</strong></p></td>
<td><p>–</p></td>
<td><p>68°</p></td>
<td><p>85°</p></td>
</tr>
<tr class="row-odd"><td><p><strong>B</strong></p></td>
<td><p>68°</p></td>
<td><p>–</p></td>
<td><p>45°</p></td>
</tr>
<tr class="row-even"><td><p><strong>C</strong></p></td>
<td><p>85°</p></td>
<td><p>45°</p></td>
<td><p>–</p></td>
</tr>
</tbody>
</table>
<p>Talið er að Snorri Sturluson hafi skrifað tvær af sögunum. Hvaða sögur er
líklegast að það hafi verið miðað við þessar upplýsingar? Rökstyðjið örstutt.</p>
</li>
<li><p>Sýnið dæmi um tvo vigra í <span class="math notranslate nohighlight">\(\Bbb R^3\)</span> sem mynda grunn og annað dæmi um
tvo vigra sem mynda ekki grunn.</p></li>
<li><p>Lýsið (eða nefnið) tvær aðferðir sem nota má til að finna útgildi falls, aðra
stærðfræðilega og hina með aðstoð forrits.</p></li>
<li><p>Leysa skal hneppi af þremur jöfnum í þremur óþekktum. Hvaða skilyrði þarf
fylki hneppisins að uppfylla til að til sé einkvæm lausn? Hvaða Python-fall
mætti nota til að kanna þetta skilyrði?</p></li>
</ol>
</section>
<section id="vv7-lagmorkun-rosenbrock-fallsins">
<h2>VV7. Lágmörkun Rosenbrock-fallsins<a class="headerlink" href="#vv7-lagmorkun-rosenbrock-fallsins" title="Permalink to this heading"></a></h2>
<p>Fall Rosenbrocks var kynnt í æfingu í kafla <a class="reference internal" href="../vidauki-A/#teikning-stigla"><span class="std std-ref">A3</span></a> og verkefni VV3. Algengt er að nota þetta fall til að prófa aðferðir í tölulegri bestun. Hér er forrit með hluta af lausn á VV3, sem skilgreinir fallið og teiknar hæðarlínur þess:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rosen</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
  <span class="k">return</span> <span class="n">res</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
<span class="p">[</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">rosen</span><span class="p">([</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">])</span>
<span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">2300</span><span class="p">,</span><span class="mi">400</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">levels</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">levstr</span> <span class="o">=</span> <span class="p">{</span><span class="n">l</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">}</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clabel</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">levstr</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="s2">&quot;True&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Fallið er örlítið breytt frá VV3, það hefur bara einn stika, tveggja stak vigur x,
með x- og y-gildunum þar sem reikna skal fallsgildið. Takið eftir hvernig
fallsgildin eru reiknuð á <span class="math notranslate nohighlight">\(400 \times 400\)</span> neti í einu lagi með því að búa
til lista úr fylkjunum <code class="docutils literal notranslate"><span class="pre">X</span></code> og <code class="docutils literal notranslate"><span class="pre">Y</span></code>. Uppflettitaflan <code class="docutils literal notranslate"><span class="pre">levstr</span></code> nýtist til að
hafa hæðarlínumerkingarnar aukastafalausar, nema þá innstu.</p>
<ol class="arabic">
<li><p>Afritið forritið að ofan inn í Colab. Minnkið svæðið sem fallið er teiknað á
um hálfa einingu á öllum hliðum, niður í ferninginn <span class="math notranslate nohighlight">\([-1.5, 1.5] \times
[-0.5, 2.5]\)</span>. Prófið að fjölga hæðarlínunum. Reiknið líka fallsgildið í
<span class="math notranslate nohighlight">\(x_0 = (-1.2, 1)\)</span> sem ætti að vera 24.2 og <span class="math notranslate nohighlight">\(x^* = (1,1)\)</span> sem
ætti að vera 0.</p></li>
<li><p>Í SciPy er pakki, <strong>optimize</strong>, fyrir tölulega bestun. Hann er oft fluttur inn með:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">scipy.optimize</span> <span class="pre">as</span> <span class="pre">opt</span></code></p>
</div></blockquote>
<p>sem <em>opt</em>, m.a. að ofan. Í honum er fall, <cite>minimize</cite>, til að finna lággildi
falla sem notast svona:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x0</span><span class="p">)</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">x</span>
</pre></div>
</div>
<p>þar sem <code class="docutils literal notranslate"><span class="pre">f</span></code> er fallið sem á að lágmarka, <code class="docutils literal notranslate"><span class="pre">x0</span></code> er vigur með byrjunarágiskun og
<code class="docutils literal notranslate"><span class="pre">xmin</span></code> er lággildispunkturinn. Notið <code class="docutils literal notranslate"><span class="pre">minimize</span></code> til að lágmarka fall
Rosenbrocks með <span class="math notranslate nohighlight">\(x_0 = (-1.2, 1)\)</span>. Skoðið hvað er í <code class="docutils literal notranslate"><span class="pre">result</span></code> og skrifið
örfá orð um það.</p>
</li>
<li><p><cite>minimize</cite> getur tekið inn viðbótarstika <code class="docutils literal notranslate"><span class="pre">callback=cb</span></code>, og þá kallar það á
<code class="docutils literal notranslate"><span class="pre">cb(xk)</span></code> með núverandi ítrekunargildi <code class="docutils literal notranslate"><span class="pre">xk</span></code> í hverri ítrekun (í þessu
tilviki er <code class="docutils literal notranslate"><span class="pre">xk</span></code> tveggja staka vigur). Notið þennan „fídus“ til að teikna
ítrekunargildin inn á hæðarlínumyndina (hægt er að láta <code class="docutils literal notranslate"><span class="pre">cb</span></code> kalla á
<code class="docutils literal notranslate"><span class="pre">plt.scatter(x[0],x[1])</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minimize</span></code> getur líka tekið inn stika <code class="docutils literal notranslate"><span class="pre">method=&quot;aðferð&quot;</span></code>, þar sem aðferð
getur t.d. verið <code class="docutils literal notranslate"><span class="pre">&quot;L-BFGS-B&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;CG&quot;</span></code>, og <code class="docutils literal notranslate"><span class="pre">&quot;Powell&quot;</span></code> fyrir utan þá sjálfvöldu,
<code class="docutils literal notranslate"><span class="pre">&quot;BFGS&quot;</span></code>. Prófið og segið skipulega frá niðurstöðum. Prófið líka eina
sjálfvalda aðferð (skoðið <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html">skjölun um minimize</a>
á netinu til að sjá möguleikana).</p>
<div class="athugid admonition">
<p class="admonition-title">Athugasemd:</p>
<p><code class="docutils literal notranslate"><span class="pre">result.nit</span></code> gefur fjölda ítrekana og <code class="docutils literal notranslate"><span class="pre">result.nfev</span></code> gefur fjölda kalla
á <code class="docutils literal notranslate"><span class="pre">rosen</span></code>. Það er ágætt að sýna niðurstöðurnar (í textareitnum) með
töflu yfir fjölda ítrekana og fallsgilda fyrir hverja aðferð (sjá kafla
<a class="reference external" href="https://cs.hi.is/python/kafli03/#markdown-og-latex">3.6</a> í
Python-nótum). Þegar bornar eru saman svona niðurstöður er venjan að reikna
með að meginhluti útreikninganna sé í fallinu sjálfu svo maður ætti að
leggja áherslu á samanburð á <code class="docutils literal notranslate"><span class="pre">nfev</span></code>.</p>
</div>
</li>
<li><p>Ákvarðið hlutafleiður og þar með stigul Rosenbrock-fallsins (á blaði) og
forritið hann í Python falli <code class="docutils literal notranslate"><span class="pre">rosg(x)</span></code> sem skilar tveggja staka NumPy-vigri
með stiglinum í punktinum <span class="math notranslate nohighlight">\(x = (x_0, x_1)\)</span>. Ef rétt er forritað ætti
stigullinn í <span class="math notranslate nohighlight">\(x_0\)</span> að vera <span class="math notranslate nohighlight">\((-215.6, -88)\)</span> og í <span class="math notranslate nohighlight">\(x=(1,1)\)</span>
ætti hann að vera <span class="math notranslate nohighlight">\((0,0)\)</span>.</p></li>
<li><p>Í <code class="docutils literal notranslate"><span class="pre">minimize</span></code> er <code class="docutils literal notranslate"><span class="pre">jac</span></code>-stiki til að tilgreina stigul fallsins sem á að
lágmarka (<strong>jac</strong> er stytting á <strong>Jacobian</strong>, sem fyrir
<span class="math notranslate nohighlight">\(f\colon\Bbb{R^2}\to\Bbb{R}\)</span> er samheiti við <strong>gradient</strong>). Ef stigullinn er
nýttur svona ættu að sparast ítrekanir og (líklega) heildarreikningar. Prófið
það með sjálfgefnu BFGS-aðferðinni, og kannið hve mikið sparast miðað við
b-lið. Í samanburðinum má má gera ráð fyrir að stigull kosti eins og tvö
fallsgildi. Segið í örfáum orðum frá niðurstöðunni.</p></li>
</ol>
</section>
<section id="vv8-jarskjalftar-og-eldgos-a-reykjanesskaga-2021">
<h2>VV8. Jarðskjálftar og eldgos á Reykjanesskaga 2021<a class="headerlink" href="#vv8-jarskjalftar-og-eldgos-a-reykjanesskaga-2021" title="Permalink to this heading"></a></h2>
<p>Í þessu verkefni á að vinna með jarðaskjálftana sem urðu á Reykjanesskaga í
febrúar og mars 2021, m.a. teikna þá inn á kort. Þið þurfið auk þess að búa til
nokkur línurit og skrifa smá skýrslu um hvað þau segja okkur. Skráin
<a class="reference external" href="http://cs.hi.is/python/skjalftar.txt">http://cs.hi.is/python/skjalftar.txt</a> er ættuð frá Veðurstofu Íslands og geymir
lista yfir skjálftana, tíma, staðsetningu og stærð hvers skjálfta. Þið áttið
ykkur strax á innihaldinu með því að smella á skrána.</p>
<ol class="arabic">
<li><p><strong>Skjálftaskrá lesin.</strong> Byrjið á að lesa skrána inn í Pandas töflu, sbr. <a class="reference external" href="https://cs.hi.is/python/kafli15/#pandas">15.
kafla</a> í Fyrirlestrarnótum um
Python. Athugið að flestar NumPy- og Matplotlib-skipanir ráða við viðföng sem
eru Pandas-dálkar, en það er líka hægt að nota <em>values</em>: Ef <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span>
<span class="pre">df.x.values</span></code> skilar NumPy-vigri með dálkinum x. Tímadálkurinn þarf sérstaka
meðhöndlun. Ef <code class="docutils literal notranslate"><span class="pre">df.tími</span></code> er Pandas-dálkur með tímasetningum á sama sniði og
eru í skránni þá dugar eftirfarandi skipanir til að búa til Pandas runu með
degi og broti úr degi frá miðnætti 24. febrúar fyrir hverja tímasetningu:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tími</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tími</span><span class="p">)</span>
<span class="n">dagur1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;24.02.2021&#39;</span><span class="p">)</span>
<span class="n">dagur</span> <span class="o">=</span> <span class="p">(</span><span class="n">tími</span> <span class="o">-</span> <span class="n">dagur1</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Línurit og töflur.</strong> Búið nú til nokkrar teikningar og/eða töflur af
skjálftunum. Hér er gott að nota hugmyndaflugið: Þið getið t.d. gert súlurit
yfir stærð skjálftanna (með 3.5–6 á x-ás og fjölda á y-ás), línurit yfir
lengd sem falla af tíma og annað fyrir breidd (tvö línurit, t.d. hlið við
hlið (með <code class="docutils literal notranslate"><span class="pre">subplot</span></code> sbr. kafla <a class="reference external" href="https://cs.hi.is/python/kafli13/?highlight=subplot#gervigogn">13.6</a> í
Python-nótunum), súlurit yfir fjölda pr. dag (eða viku), eða töflu yfir
meðalstaðsetningu skjálfta í hverri viku. Ath. að á Reykjanesskaga er hver
lengdargráða u.þ.b. 44% (þ.e. cos 64°) af breiddargráðu. Svo kemur líka vel
til greina að breyta staðsetningunum fyrst í (x,y) hnit sbr. lið 3 áður en
línurit af staðsetningum eru gerð.</p>
<p>Það er hægt að teikna rununa <code class="docutils literal notranslate"><span class="pre">dagur</span></code> á x-ás en svo er líka hægt að teikna
<code class="docutils literal notranslate"><span class="pre">tími</span></code> beint með eftirfarandi falli sem merkir inn réttar dagsetningar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">daga_xás</span><span class="p">():</span>
  <span class="c1"># Undirbýr teikningu tímasetninga á x-ás. Hentar fyrir tímabil frá</span>
  <span class="c1"># nokkrum dögum og upp í nokkrar vikur.</span>
  <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
  <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">HourLocator</span><span class="p">(</span><span class="n">byhour</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">HourLocator</span><span class="p">(</span><span class="n">byhour</span><span class="o">=</span><span class="p">[</span><span class="mi">12</span><span class="p">]))</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y&quot;</span><span class="p">))</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">labelrotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
  <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Skrifið stutta skýrslu um hvað þessar myndir segja okkur, t.d. um þróun
skjálftavirkninnar, hlutfall stórra og lítilla skjálfta eða hvað annað sem
ykkur finnst áhugavert.</p>
</li>
<li><p><strong>Breytt úr hnattstöðu í xy-hnit.</strong> Til að undirbúa teikningu skjálftanna inn
á kort þarf að breyta staðsetningu þeirra úr hnattstöðu í svonend landshnit.
Til þess má nota Python-pakkann <cite>pyproj</cite>. Hann þarf að setja upp sérstaklega
með skipuninni:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">!pip</span> <span class="pre">install</span> <span class="pre">pyproj</span></code></p>
</div></blockquote>
<p>Eftir það er hægt að keyra eftirfarandi skipanir sem búa til fall <cite>hnatt2xy</cite>
sem nota má með <cite>(x,y) = hnatt2xy(breidd,lengd)</cite> til að breyta úr lengd og
breidd yfir í landshnit. Viðföngin og skilabreyturnar mega vera NumPy-vigrar.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Transformer</span> <span class="k">as</span> <span class="n">Trans</span>
<span class="n">hnatt2xy</span> <span class="o">=</span> <span class="n">Trans</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="s1">&#39;latlon&#39;</span><span class="p">,</span><span class="mi">3057</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span>
</pre></div>
</div>
<div class="athugid admonition">
<p class="admonition-title">Athugasemd: Um landshnitakerfið</p>
<p>Landshnitakerfi Íslands með auðkenni ISN93 er algeng kortavörpunin fyrir
Íslandskort. Kerfið hefur einingu metra, og x- og y-ásar þess snúa í austur og
norður eins og hefðbundið er um þá ása. Þetta kerfi er númer 3057 í svonendri
EPSG skrá sem er alþjóðleg skrá um kortavarpanir sem margvíslegur
kortahugbúnaður þekkir, m.a. Pyproj-pakkinn. Vörpunin er hornsönn keiluvörpun
(conformal conic projection) Lamberts með miðpunkt í 65°N, 19°V sem hefur hnit
(500000,500000) og viðmiðunarbreiddarbauga 64.25°N og 65.75°N. Tvær nýrri
varpanir eru til, ISN2004 og ISN2016. Báðar hafa sama miðpunkt og breiddarbauga
en hnit miðpunktsins eru önnur, (1700,300) km og (2700,300) km. Þessi munur
gerir mögulegt að þekkja strax í sundur úr hvaða kerfi tiltekin hnit eru. Auk
þess hafa hnit einstakra mælipunkta færst smávegis vegna landreksins sem er um
hálfur metri frá 1993 til 2016.</p>
</div>
</li>
<li><p><strong>Landakort með skjálftum.</strong> Næst á að merkja skjálftana inn á kort, Skráin
<a class="reference external" href="https://cs.hi.is/python/reykjanesskagi.png">https://cs.hi.is/python/reykjanesskagi.png</a> geymir kort af Reykjanesskaga
sem hægt er að nota sem bakgrunn til að teikna inn á. Með því að stilla mörk
ása á sömu hnit og mörk kortsins er hægt að merkja skjálftana á nákvæmlega
rétta staði. Kortaskráin er búin til með forriti sem heitir <strong>qgis</strong>, og
henni fylgir svokölluð „world“ skrá
(<a class="reference external" href="https://cs.hi.is/python/reykjanesskagi.pgw">https://cs.hi.is/python/reykjanesskagi.pgw</a>) með upplýsingum um hnit svæðisins
sem kortið nær yfir. Hér fyrir neðan er fall sem les slíkt par af skrám og annað fall
til að birta kortið sem bakgrunn í Matplotlib glugga.</p>
<p>Til að fá gott kort ætti að velja <cite>gluggabreidd</cite> sæmilega stóra svo kortið
fylli upp breidd skjalsins sem þið búið til. Merkið svo skjálftana inn á
kortið með <cite>scatter</cite> og látið stærð skjálftanna ráða stærð markeranna og
jafnvel lit. Enn ein hugmynd er að sýna stærstu skjálftana með stjörnu.</p>
<p>Skrifið að lokum nokkur orð um það sem kortið segir ykkur, t.d. með vísun
til örnefna (þið gætuð jafnvel skoðað önnur kort með fleiri örnefnum)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1">#KORTFÖLL</span>
<span class="k">def</span> <span class="nf">lesa_qgis_kort</span><span class="p">(</span><span class="n">skrá</span><span class="p">):</span>
  <span class="c1"># Les kort úr skrá.png og skrá.pgw og skilar pari (kort,mörk) með þrívíðu</span>
  <span class="c1"># NumPy-fylki með kortinu ásamt fjögurra staka vigur með hnitum í kílómetrum</span>
  <span class="c1"># á vestur-, austur-, suður- og norðurbrúnum kortsins, mörk = [xv,xa,ys,yn].</span>
  <span class="n">kort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flipud</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">skrá</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">))</span> <span class="c1"># svo kortið sé ekki á hvolfi</span>
  <span class="n">world</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span> <span class="o">+</span> <span class="s2">&quot;.pgw&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="n">hæð</span><span class="p">,</span><span class="n">breidd</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">kort</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
  <span class="n">skali</span> <span class="o">=</span> <span class="n">world</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># metrar á díl (pixel) í png-skránni</span>
  <span class="n">xv</span> <span class="o">=</span> <span class="n">world</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
  <span class="n">xa</span> <span class="o">=</span> <span class="n">xv</span> <span class="o">+</span> <span class="n">skali</span><span class="o">*</span><span class="n">breidd</span>
  <span class="n">yn</span> <span class="o">=</span> <span class="n">world</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
  <span class="n">ys</span> <span class="o">=</span> <span class="n">yn</span> <span class="o">-</span> <span class="n">skali</span><span class="o">*</span><span class="n">hæð</span>
  <span class="n">mörk</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">xv</span><span class="p">,</span><span class="n">xa</span><span class="p">,</span><span class="n">ys</span><span class="p">,</span><span class="n">yn</span><span class="p">])</span><span class="o">/</span><span class="mi">1000</span>  <span class="c1"># breytt í km</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">kort</span><span class="p">,</span><span class="n">mörk</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sýna_kort</span><span class="p">(</span><span class="n">kort</span><span class="p">,</span> <span class="n">mörk</span><span class="p">,</span> <span class="n">gluggabreidd</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
  <span class="c1"># Birtir kort í Matplotlib glugga og setur mörk ása til samræmis við mörk</span>
  <span class="c1"># kortsins; gluggabreidd og dpi eru notuð til að búa gluggann til með</span>
  <span class="c1"># plt.figure kalli, sem gefur glugganum tilgreinda breidd (í tommum) og hæð</span>
  <span class="c1"># sem ákvarðast hlutfallslega eftir lögun kortsins</span>
  <span class="p">(</span><span class="n">hæð</span><span class="p">,</span> <span class="n">breidd</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">kort</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">gluggabreidd</span><span class="p">,</span> <span class="n">gluggabreidd</span><span class="o">*</span><span class="n">hæð</span><span class="o">/</span><span class="n">breidd</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">mörk</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">kort</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">())</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../vidauki-A/" class="btn btn-neutral float-left" title="VIÐAUKI A: Python-teikning tvívíðra falla" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search,
    .wy-nav-top {
        background: #01447B;
    }

    /* Sidebar */
    .wy-nav-side {
        background: #343131;
    }
</style>




</body>
</html>