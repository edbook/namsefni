<!DOCTYPE html>
<html class="writer-html5" lang="is" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>15 Pandas &mdash; Fyrirlestrarnótur um Python 2021</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/python.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/edbook.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_2.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/translations.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>

<!-- hoverrole.py css code -->
<style type="text/css">
    a.tooltip {
        outline: none;
        border-bottom: thin dotted;
        background: #ffeedd
    }

    a.tooltip strong {
        line-height: 30px;
    }

    a.tooltip:hover {
        text-decoration: none;
    }

    a.tooltip span {
        z-index: 10;
        display: none;
        padding: 14px 20px;
        margin-top: -30px;
        margin-left: 12px;
        width: 310px;
        line-height: 16px;
    }

    a.tooltip:hover span {
        display: inline;
        position: absolute;
        color: #111;
        border: 1px solid #DCA;
        background: #fffAF0;
    }

    .callout {
        z-index: 20;
        position: absolute;
        top: 30px;
        border: 0;
        left: -12px;
    }

    /*CSS3*/
    a.tooltip span {
        border-radius: 4px;
        box-shadow: 5px 5px 8px #CCC;
    }
</style>
<!-- End hoverrole.py css code -->

<style type="text/css">
    .sagecell .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
    }

    .sagecell .CodeMirror {
        height: auto;
    }

    /* - Begin equation reference style - */
    h6.eqno {
        display: inline-block;
        padding-left: 10px;
    }

    h6 .headerlink {
        display: inline-block !important;
    }

    h6 .headerlink:after {
        visibility: hidden !important;
    }

    h6 .headerlink:hover:after {
        visibility: visible !important;
    }

    .eqno:hover>.headerlink:after {
        visibility: visible !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    /* - End - */
</style>
<style type="text/css">
    /* .ace_content .ace_layer .ace_line_group .ace_line * { */
    /*     font-size: 15px !important; */
    /* } */
    /* div[class^='highlight'] pre {font-size:15px} */
    div.code-block-caption {
        margin-bottom: 4px
    }
</style>

    <link rel="index" title="Atriðaskrá" href="../genindex/" />
    <link rel="search" title="Leit" href="../search/" />
    <link rel="next" title="V E R K E F N I" href="../verkefnafyrirsogn/" />
    <link rel="prev" title="14 Millikafli: Um reiknifræði og gagnavísindi" href="../kafli14/" />



<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>


 

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Fyrirlestrarnótur um Python
              <img src="../_static/haskoli_islands-edbook.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../kafli01/">1  Inngangur: Um Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli02/">2  Dæmi um Python forrit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli03/">3  Umhverfi fyrir Python: Jupyter og Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli04/">4  Grunnatriði Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli05/">5  Söfn: Eitt nafn en mörg gildi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli06/">6  Helstu aðgerðir fyrir söfn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli07/">7  Uppflettitöflur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli08/">8  Skrár</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli09/">9  Teikning með Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli10/">10  NumPy pakkinn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli11/">11  Reiknað með fylkjum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli12/">12  Dæmi um hagnýtingu fylkjareikninga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli13/">13  Slembitölur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli14/">14  Millikafli: Um reiknifræði og gagnavísindi</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">15  Pandas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pandas-gogn">15.1  Pandas gögn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smii-gagnatafla">15.2  Smíði gagnatafla</a></li>
<li class="toctree-l2"><a class="reference internal" href="#helstu-pandas-skipanir">15.3  Helstu Pandas-skipanir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#innbygg-python-foll-og-pandas">15.4  Innbyggð Python föll og Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pandas-og-teikningar">15.5  Pandas og teikningar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fleiri-pandas-aefingar">15.6  Fleiri Pandas æfingar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#punktrithattur">15.7  Punktritháttur</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../verkefnafyrirsogn/">V E R K E F N I</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Fyrirlestrarnótur um Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">15  </span>Pandas</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/kafli15.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pandas">
<h1><span class="section-number">15  </span>Pandas<a class="headerlink" href="#pandas" title="Permalink to this heading"></a></h1>
<p>Pandas er pakki fyrir gagnameðhöndlun og gagnagreiningu í Python. Með Pandas er auðvelt að lesa stórar gagnaskrár, bæði textaskrár og töflureikniskrár (t.d. úr Excel eða Google sheets) og flokka gögnin á ýmsa vegu, velja hlutgögn (línur eða dálka), gera ýmsa útreikninga, og skrifa niðurstöðuna, annaðhvort í venjulegt úttak (í vinnubók/á skjá) eða í nýja skrá. Það er líka hægt að búa til NumPy-fylki úr Pandas-töflum og nota Matplotlib til að birta niðurstöður grafískt. Dæmigerðar Pandas-aðgerðir eru oft framkvæmdar í töflureikni, en það hefur ýmsa kosti að gera þær í forriti, t.d. ef maður vill framkvæma samsskonar reikninga aftur og til þess er Pandas pakkinn tilvalinn.</p>
<p>Á netinu má finna <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html">10 mín. leiðbeiningar</a>, <a class="reference external" href="https://assets.datacamp.com/blog_assets/PandasPythonForDataScience.pdf">svindlblað</a> og annað <a class="reference external" href="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf">slíkt</a>. Það síðara er e.t.v. heldur vandaðra.</p>
<section id="pandas-gogn">
<span id="id1"></span><h2><span class="section-number">15.1  </span>Pandas gögn<a class="headerlink" href="#pandas-gogn" title="Permalink to this heading"></a></h2>
<p>Pandas-pakkinn er skv. hefð fluttur inn með</p>
<blockquote>
<div><p><code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span> <span class="pre">as</span> <span class="pre">pd</span></code></p>
</div></blockquote>
<p>Aðalgagnatögin í Pandas eru pd.Series (<em>runa</em>] sem er einvíð runa gagna, og
pd.DataFrame (<em>gagnatafla</em>) sem er tvívíð tafla. Tvennt greinir Pandas frá
NumPy: Í fyrsta lagi hafa stökin í rununum og línur og dálkar taflanna auðkenni
eða nöfn, og í öðru lagi geta dálkar taflanna verið af mismunandi tagi, einn
dálkur gæti t.d. geymt strengi, annar heiltölur og sá þriðji kommutölur.</p>
<p>Venjulega er vísað í einstaka dálka og línur eftir nöfnum þeirra, en það er líka
hægt að vísa í þær eftir númeri (sem sé hvar þær eru í röðinni). Sama gildir um
hluttöflur. <a class="reference internal" href="#id2"><span class="std std-numref">Tafla 15.2</span></a> sýnir skipanir fyrir
báðar aðferðirnar.</p>
<div class="athugid admonition">
<p class="admonition-title">Athugasemd</p>
<p>Í opinberri Pandas-hjálp eru auðkenni eða nöfn á línum og dálkum kölluð
<em>labels</em>, og línurnar stundum kallaðar <em>index</em>.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Á vef hagstofunnar er hægt að hlaða niður allskonar talnaefni, m.a.
kosningaúrslitum. Skráin <span class="h"><a href="https://cs.hi.is/python/kosningar.xlsx"
download="kosningar.xlsx"><b>cs.hi.is/python/kosningar.xlsx</b></a></span> sem er
fengin þaðan geymir úrslit alþingiskosninga 2017. Skráin hefur fjóra dálka:
<strong>stafur</strong>, <strong>flokkur</strong>, <strong>atkvæði</strong> og <strong>þingsæti</strong> (<em>stafur</em> er
listabókstafur). Smellið gjarna á þessa skrá og skoðið hana í Excel.</p>
<p>Hér er svo forritsbútur sem les skrána, og birtir hana, reiknar heildarfjölda
atkvæða, bætir við dálki með hlutfalli atkvæðanna sem hver flokkur fékk, og
birtir loks þessa auknu töflu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">kosn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;http://cs.hi.is/python/kosningar.xlsx&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kosn</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Atkvæði&quot;</span><span class="p">])</span>
<span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Hlutf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Atkvæði&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">n</span>
<span class="n">display</span><span class="p">(</span><span class="n">kosn</span><span class="p">)</span>
</pre></div>
</div>
<p>Breytan kosn er <em>gagnatafla</em> af taginu <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>. Hér fylgir byrjunin á
töflunni sem birtist:</p>
<figure class="align-center" style="width: 13cm">
<img alt="../_images/atkv%C3%A6%C3%B0i1.png" src="../_images/atkv%C3%A6%C3%B0i1.png" />
</figure>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Afritið Sýnidæmið yfir í vinnubók og keyrið það. Prófið að nota print í
stað display. Bætið svo við samtals-línu með:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kosn</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;Samtals&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kosn</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">kosn</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;Samtals&quot;</span><span class="p">,</span> <span class="s2">&quot;Stafur&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">kosn</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;Samtals&quot;</span><span class="p">,</span> <span class="s2">&quot;Flokkur&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>(seinni tvær línurnar eru tilkomnar vegna þess að það á ekki að leggja saman
stafina og listana). Bætið líka við dálki „Atkv-sætis“ með atkvæði á bak við
hvert þingsæti með því að deila í atkvæðin með þingsætunum. Loks er hægt að
birta hlutfallið sem prósentu og einum aukastaf, og aftasta dálkinn án
aukastafa með skipununum:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">birt</span> <span class="o">=</span> <span class="n">kosn</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">({</span><span class="s2">&quot;Hlutf&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1%}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;Atkv-sætis&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">&quot;</span><span class="p">})</span>
<span class="n">display</span><span class="p">(</span><span class="n">birt</span><span class="p">)</span>
</pre></div>
</div>
<p>(í innri slaufusvigunum eru snið líkt og í f-strengjum).</p>
</div>
<p>Í sýnidæminu og æfingunni sést að sjálfgefin auðkenni línanna eru einfaldlega
tölurnar 0–10, en dálkarnir fá nöfn úr hauslínu Excel-skrárinnar. Með
<code class="docutils literal notranslate"><span class="pre">display</span></code> prentast taflan út HTML-sniðin, en með <code class="docutils literal notranslate"><span class="pre">print</span></code> fæst hún með
textasniði.</p>
<p>Við sjáum líka að vísað er í dálk töflu eins og í gildi í uppflettitöflu
(<em>dictionary</em>), með vísi sem er nafn dálksins innan hornklofa, en með því að
nota <cite>.loc</cite> er í staðinn vísað í línu, og þá er líka hægt að vísa í einstakt
stak eða reit í töflunni eins og í NumPy fylki með
<code class="docutils literal notranslate"><span class="pre">gagnatafla.loc[lína,dálkur]</span></code>. Tökum líka eftir að reikniaðgerð (hér deiling)
verkar á öll stök dálks í einu, eins og í NumPy.</p>
</section>
<section id="smii-gagnatafla">
<h2><span class="section-number">15.2  </span>Smíði gagnatafla<a class="headerlink" href="#smii-gagnatafla" title="Permalink to this heading"></a></h2>
<p>Í stað þess að lesa gagnatöflur úr skrám eins og gert er í kaflanum hér á undan
er hægt að búa þær til úr breytum sem þegar eru fyrir hendi, hvort sem er
uppflettitöflum, listum eða NumPy-fylkjum. Til þess er hægt að nota
gagnatöflusmiðinn (-constructor) <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>. Einfallt kall á hann er:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>þar sem <code class="docutils literal notranslate"><span class="pre">data</span></code> getur verið <em>NumPy-fylki</em>, <em>listi af listum</em> eða
<em>uppflettitafla</em>. Í tveimur fyrri tilvikunum fá dálkarnir nöfn 0, 1, 2,… en
með uppflettitöflu gefa lyklar hennar nöfn dálkanna. Þegar <code class="docutils literal notranslate"><span class="pre">data</span></code> er listi af
listum verður hver innri listi lína í gagnatöflunni, en ef það er uppflettitafla
með gildi sem eru listar lenda þeir í dálkum gagnatöflunnar. Svo er hægt að bæta
viðbótarstikum við kallið á <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, t.d. <code class="docutils literal notranslate"><span class="pre">columns=[&quot;D1&quot;,</span> <span class="pre">&quot;D2&quot;]</span></code> til að
gefa dálkunum nöfn og <code class="docutils literal notranslate"><span class="pre">index=[1,2,3]</span></code> til að gefa línunum nöfn (auðkenni).</p>
<p>Þegar gagnatafla er búin til úr NumPy-fylki með <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.DataFrame(A)</span></code> er
fylkið ekki afritað heldur geymir taflan tilvísun í fylkið, sbr. athugasemd í
kafla <a class="reference internal" href="../kafli10/#stok-fylkis-linur-og-dalkar"><span class="std std-numref">10.5.2</span></a>. Til að taka í staðinn afrit má
nota kallið</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.DataFrame(A,</span> <span class="pre">copy=True)</span></code></p>
</div></blockquote>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi:</p>
<p>Skipanirnar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nafn&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Ari&quot;</span><span class="p">,</span> <span class="s2">&quot;Ása&quot;</span><span class="p">],</span> <span class="s2">&quot;aldur&quot;</span><span class="p">:[</span><span class="mi">12</span><span class="p">,</span><span class="mi">18</span><span class="p">]}</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">slembi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">slembi</span><span class="p">)</span>
</pre></div>
</div>
<p>prenta út:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  nafn  aldur
0  Ari     12
1  Ása     18
          A         B         C
0  0.773956  0.438878  0.858598
1  0.697368  0.094177  0.975622
</pre></div>
</div>
</div>
</section>
<section id="helstu-pandas-skipanir">
<h2><span class="section-number">15.3  </span>Helstu Pandas-skipanir<a class="headerlink" href="#helstu-pandas-skipanir" title="Permalink to this heading"></a></h2>
<p>Hér fylgja töflur yfir nokkrar helstu Pandas-skipanirnar. Þær eru hvergi nærri
tæmandi, en í staðinn vísast í <em>svindlblöðin</em> sem nefnd eru hér fremst í
<a class="reference internal" href="#pandas"><span class="std std-ref">innganginum</span></a>. Í töflunum stendur <code class="docutils literal notranslate"><span class="pre">df.</span></code> fyrir gagnatöflu
(<em>DataFrame</em>) og <code class="docutils literal notranslate"><span class="pre">s.</span></code> fyrir runu (<em>Series</em>), sem sé stakan dálk eða línu.</p>
<table class="docutils align-default" id="dataframe-smiurinn">
<caption><span class="caption-number">Tafla 15.1: </span><span class="caption-text">DataFrame smiðurinn</span><a class="headerlink" href="#dataframe-smiurinn" title="Varanlegur hlekkur á þessa töflu"></a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.DataFrame(uppflettitafla)</span></code></p></td>
<td><p>Býr til {„col1“:[1,2,3], col2</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id2">
<caption><span class="caption-number">Tafla 15.2: </span><span class="caption-text">Skipanir til að ná í dálka, línur og hluttöflur</span><a class="headerlink" href="#id2" title="Varanlegur hlekkur á þessa töflu"></a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df[&quot;nafn&quot;]</span></code></p></td>
<td><p>Vísað í dálk <code class="docutils literal notranslate"><span class="pre">&quot;nafn&quot;</span></code> (skilar runu (<em>Sequence</em>))</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df.iloc[:,2]</span></code></p></td>
<td><p>Dálkur númer 2 (runa)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df.loc[3]</span></code></p></td>
<td><p>Lína með auðkenni 3 (runa)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df.loc[&quot;Samtals&quot;]</span></code></p></td>
<td><p>Lína með auðkenni <code class="docutils literal notranslate"><span class="pre">&quot;Samtals&quot;</span></code> (runa) <br>
(auðkenni geta verið heiltölur eða strengir)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df.iloc[3]</span></code></p></td>
<td><p>Lína númer 3 (runa)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df.loc[[2,4,5]]</span></code></p></td>
<td><p>Línur auðkenndar 2, 4 og 5 (hluttafla)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df.iloc[3:6]</span></code></p></td>
<td><p>Línur númer 3, 4 og 5 (hluttafla)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df[[&quot;A&quot;,</span> <span class="pre">&quot;B&quot;,</span> <span class="pre">&quot;D&quot;]]</span></code></p></td>
<td><p>Dálkar A, B og D (hluttafla)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df.loc[(3,4,5),</span> <span class="pre">&quot;A&quot;:&quot;C&quot;]</span></code></p></td>
<td><p>Línur auðkenndar 3, 4 og 5, dálkar frá A t.o.m. C</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df.loc[3,&quot;nfn&quot;]</span></code></p></td>
<td><p>Vísað í tiltekinn reit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df[df[&quot;A&quot;]</span> <span class="pre">&gt;</span> <span class="pre">0]</span></code></p></td>
<td><p>Velja línur þar sem dálkur <code class="docutils literal notranslate"><span class="pre">A</span></code> er jákvæður</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="pandas-innlestur">
<caption><span class="caption-number">Tafla 15.3: </span><span class="caption-text">Skipanir til að lesa og skrifa skrár</span><a class="headerlink" href="#pandas-innlestur" title="Varanlegur hlekkur á þessa töflu"></a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_excel(excelskrá)</span></code></p></td>
<td><p>Lesa fremsta vinnublað (<em>sheet</em>) inn í df</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_excel(excelskrá,s)</span></code></p></td>
<td><p>Lesa vinnublað s inn í df (s má vera nafn eða nr.)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_excel(…,dtype=str)</span></code></p></td>
<td><p>Lesa alla dálka sem strengi</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df.to_excel(excelskrá)</span></code></p></td>
<td><p>Skrifa í Excelskrá</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv(skrá)</span></code></p></td>
<td><p>Lesa töflu <code class="docutils literal notranslate"><span class="pre">df</span></code> úr skrá með kommum milli dálka, <br>
efsta lína fyrirsögn með dálkanöfnum</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv(skrá,</span></code> <br> &emsp; <code class="docutils literal notranslate"><span class="pre">sep=&quot;;&quot;)</span></code></p></td>
<td><p>Dálkar aðskildir með <code class="docutils literal notranslate"><span class="pre">;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv(skrá,</span></code> <br> &emsp; <code class="docutils literal notranslate"><span class="pre">names=[&quot;d1&quot;,&quot;d2&quot;...])</span></code></p></td>
<td><p>Lesa kommuaðskilda skrá (þmt 1. línu), <br>
dálkanöfn úr <code class="docutils literal notranslate"><span class="pre">names</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv(skrá,</span></code> <br> &emsp; <code class="docutils literal notranslate"><span class="pre">index_col=2)</span></code></p></td>
<td><p>Lesa kommuaðskilda skrá, línuauðkenni úr dálki 2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv(skrá,</span></code> <br> &emsp; <code class="docutils literal notranslate"><span class="pre">delim_whitespace=True)</span></code></p></td>
<td><p>Lesa skrá með bilum á milli dálka</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_fwf(skrá)</span></code></p></td>
<td><p>Lesa skrá með fastri dálkabreidd. Breidd dálka er <br>
fundin sjálfkrafa út með því að skoða skrána. <br>
Nota má stika <code class="docutils literal notranslate"><span class="pre">dtype</span></code> og <code class="docutils literal notranslate"><span class="pre">names</span></code>; sjá að ofan <br>
(fwf = <em>fixed width file</em>)</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="ymsar-pandas-skipanir">
<caption><span class="caption-number">Tafla 15.4: </span><span class="caption-text">Ýmsar skipanir fyrir gagnatöflur</span><a class="headerlink" href="#ymsar-pandas-skipanir" title="Varanlegur hlekkur á þessa töflu"></a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df[&quot;nýrdálkur&quot;]</span> <span class="pre">=</span> <span class="pre">df[&quot;A&quot;]*2</span></code></p></td>
<td><p>Bætt við nýjum dálki sem er tvöfaldur dálkur <code class="docutils literal notranslate"><span class="pre">A</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.drop(3)</span></code></p></td>
<td><p>Eyða línu með auðkenni 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.drop(columns</span> <span class="pre">=</span> <span class="pre">[&quot;A&quot;,&quot;D&quot;])</span></code></p></td>
<td><p>Eyða dálkum A og D</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">display(df)</span></code></p></td>
<td><p>Skrifa töflu á skjá, með HTML-sniði</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">print(df)</span></code></p></td>
<td><p>Skrifa töflu á skjá með textasniði</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">display(df.style.format(fmt))</span></code></p></td>
<td><p>Skrifa HTML-töflu með sniði <code class="docutils literal notranslate"><span class="pre">fmt</span></code> sem getur t.d. <br>
verið <code class="docutils literal notranslate"><span class="pre">&quot;{:.2%}&quot;</span></code> eða <code class="docutils literal notranslate"><span class="pre">{&quot;A&quot;:</span> <span class="pre">&quot;{:.2f}&quot;}</span></code> <br>
(til að sníða bara dálk <code class="docutils literal notranslate"><span class="pre">A</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.sort_values(by=&quot;dálkur&quot;)</span></code></p></td>
<td><p>Raða töflu eftir gildunum í <em>dálki</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.sort_values(by=&quot;dálkur&quot;,</span></code> <br> &emsp; <code class="docutils literal notranslate"><span class="pre">ascending=False)</span></code></p></td>
<td><p>Raða töflu í minnkandi röð</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">df.describe()</span></code></p></td>
<td><p>Skila töflu yfir meðaltöl, staðalfrávik o.fl.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df1.join(df2)</span></code></p></td>
<td><p>Sameina <code class="docutils literal notranslate"><span class="pre">df1</span></code> og <code class="docutils literal notranslate"><span class="pre">df1</span></code> með
<a class="reference external" href="https://en.wikipedia.org/wiki/Relational_algebra#Joins_and_join-like_operators">join</a>-virkja
útfrá <br> línuauðkennum (<em>indexum</em>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">L</span> <span class="pre">=</span> <span class="pre">list(df[&quot;nfn&quot;])</span></code></p></td>
<td><p>Dálki „nfn“ breytt í venjulegan Python lista</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">np.array(df.loc[:,&quot;A&quot;:&quot;C&quot;])</span></code></p></td>
<td><p>Hluttöflu breytt í NumPy fylki</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">df.loc[:,&quot;A&quot;:&quot;C&quot;].values</span></code></p></td>
<td><p>Önnur leið til að búa til NumPy fylki</p></td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Eyðið flokki að eigin vali úr kosningaúrslitatöflunni, þó ekki þeims síðasta.
Prófið svo að birta línur þar fyrir aftan, annars vegar með <code class="docutils literal notranslate"><span class="pre">loc</span></code> og hinsvegar
með <code class="docutils literal notranslate"><span class="pre">iloc</span></code> og takið eftir muninum.</p>
</div>
<table class="docutils align-default" id="pandas-fyrir-runur">
<caption><span class="caption-number">Tafla 15.5: </span><span class="caption-text">Skipanir fyrir runur (<em>sequences</em>)</span><a class="headerlink" href="#pandas-fyrir-runur" title="Varanlegur hlekkur á þessa töflu"></a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s[nafn]</span></code></p></td>
<td><p>Stak með gefið nafn</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.iloc[nr]</span></code></p></td>
<td><p>Stak númer nr</p></td>
</tr>
<tr class="row-odd"><td><p>v = np.array(s) <br>
v = s.values</p></td>
<td><p>Runu breytt í NumPy vigur</p></td>
</tr>
<tr class="row-even"><td><p>s.mean()</p></td>
<td><p>Meðaltal</p></td>
</tr>
<tr class="row-odd"><td><p>s.std()</p></td>
<td><p>Staðalfrávik</p></td>
</tr>
<tr class="row-even"><td><p>L = list(s.index)</p></td>
<td><p>Venjulegur listi með auðkennum s</p></td>
</tr>
</tbody>
</table>
</section>
<section id="innbygg-python-foll-og-pandas">
<h2><span class="section-number">15.4  </span>Innbyggð Python föll og Pandas<a class="headerlink" href="#innbygg-python-foll-og-pandas" title="Permalink to this heading"></a></h2>
<p>Oft er hægt að beita algengum innbyggðum Python-föllum á hvort sem er
gagnatöflur eða Pandas-runur beint. Þannig er hægt að finna stærsta stak runu og
fjölda lína í töflu með <code class="docutils literal notranslate"><span class="pre">max(s)</span></code> og <code class="docutils literal notranslate"><span class="pre">len(df)</span></code>. Annað dæmi er <code class="docutils literal notranslate"><span class="pre">zip</span></code>: til að
búa til uppflettitöflu frá listabókstaf í flokk í sýnidæminu í <a class="reference internal" href="#pandas-gogn"><span class="std std-numref">kafla
15.1</span></a> má nota <code class="docutils literal notranslate"><span class="pre">U</span> <span class="pre">=</span> <span class="pre">dict(zip(kosn[&quot;Stafur&quot;],</span> <span class="pre">kosn[&quot;Flokkur&quot;]))</span></code>. Það
þarf sem sé ekki nauðsynlega að breyta Pandas-hlutum í venjulega lista áður en
unnið er með þá áfram.</p>
<p>Það sama gildir um bæði NumPy-föll og Matplotlib-skipanir, að þeim má oft beita
beint á Pandas-hluti. Ef <code class="docutils literal notranslate"><span class="pre">df</span></code> er ferningslaga og <code class="docutils literal notranslate"><span class="pre">s</span></code> hefur rétta lengd þá má
t.d. leysa jöfnuhneppi með <code class="docutils literal notranslate"><span class="pre">la.solve(df,</span> <span class="pre">s)</span></code> og reikna kvaðratrætur allra
staka með <code class="docutils literal notranslate"><span class="pre">np.sqrt(df)</span></code>. Þetta er samt ekki alveg algilt, t.d. er hægt að
reikna <code class="docutils literal notranslate"><span class="pre">sum(df.values)</span></code> en ekki <code class="docutils literal notranslate"><span class="pre">sum(df)</span></code>. Um notkun Pandas með Matplotlib
er svo rætt í næsta kafla.</p>
</section>
<section id="pandas-og-teikningar">
<h2><span class="section-number">15.5  </span>Pandas og teikningar<a class="headerlink" href="#pandas-og-teikningar" title="Permalink to this heading"></a></h2>
<p>Matplotlib teikniskipanir geta notað dálka í Pandas-töflum sem viðföng. Til dæmis, ef <code class="docutils literal notranslate"><span class="pre">xy.xlsx</span></code> hefði tvo dálka, „x“ og „y“, þá mætti teikna línurit af þeim með skipununum:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">readexcel</span><span class="p">(</span><span class="s2">&quot;xy.xlsx&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Í eftirfarandi dæmi eru Pandas-dálkar notaðir sem viðföng í skipanirnar <code class="code docutils literal notranslate"><span class="pre">bar</span></code> og <code class="code docutils literal notranslate"><span class="pre">xticks</span></code>.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Kosningaúrslit með Pandas</p>
<p>Hér er dæmi sem teiknar súlurit af kosningaúrslitunum 2017 sem voru
á dagskrá í sýnidæmi í grein <a class="reference internal" href="#pandas-gogn"><span class="std std-numref">15.1</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">kosn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;http://cs.hi.is/python/kosningar.xlsx&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kosn</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Atkvæði&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;tomato&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Stafur&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Atkvæði&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Úrslit alþingiskosninga 2017&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Hér er x listinn [0,1,2…9] (það voru 10 framboðslistar). Lista ef liti má finna
<a class="reference external" href="https://en.wikipedia.org/wiki/Web_colors#Extended_colors">hér</a>.
Forritið teiknar þessa mynd:</p>
<figure class="align-center" style="width: 11cm">
<img alt="../_images/kosningar-2017.jpg" src="../_images/kosningar-2017.jpg" />
</figure>
</div>
</section>
<section id="fleiri-pandas-aefingar">
<h2><span class="section-number">15.6  </span>Fleiri Pandas æfingar<a class="headerlink" href="#fleiri-pandas-aefingar" title="Permalink to this heading"></a></h2>
<p>Til að læra betur á Pandas er tilvalið að beita því til að leysa ýmis verkefni tengd
skráavinnslu aftast í þessum fyrirlestrarnótum, t.d. verkefni <a class="reference internal" href="../kafli11/#reikna-me-fylkjum"><span class="std std-numref">11</span></a>, <a class="reference internal" href="../verkefni/#sameining-nafnaskrar-og-einkunnaskrar"><span class="std std-numref">15</span></a>, <a class="reference internal" href="../verkefni/#kosningaurslit"><span class="std std-numref">16</span></a>, <a class="reference internal" href="../verkefni/#hiti-og-urkoma"><span class="std std-numref">19</span></a>, <a class="reference internal" href="../verkefni/#malmavinnsla"><span class="std std-numref">23</span></a>, <a class="reference internal" href="../verkefni/#korfuboltamenn"><span class="std std-numref">27</span></a> og <a class="reference internal" href="../verkefni/#poker"><span class="std std-numref">35</span></a>. Með því gefst tækifæri til að nota ýmsar af þeim skipunum sem gefnar eru í töflunum í kafla <a class="reference internal" href="#helstu-pandas-skipanir"><span class="std std-numref">15.3</span></a></p>
</section>
<section id="punktrithattur">
<h2><span class="section-number">15.7  </span>Punktritháttur<a class="headerlink" href="#punktrithattur" title="Permalink to this heading"></a></h2>
<p>Í Python eru hornklofar notaðir til að tákna gildi í uppflettitöflum eins og við
kynntumst í <a class="reference internal" href="../kafli07/#uppflettitoflur"><span class="std std-numref">7. kafla</span></a>, á svipaðan hátt og Pandas
notar hornklofa til að vísa í töfludálka. Í Javascript er hægt að skilgreina
hluti (<em>objects</em>) sem svara að mörgu leyti til uppflettitaflna í Python. Þar er
hægt að nota hornklofa til að fletta upp eiginleikum hluta, en maður hefur
val og getur líka notað punkt. Eftirfarandi er löglegt Javascript forrit:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">einst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;nafn&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Jón&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;aldur&#39;</span><span class="o">:</span><span class="w"> </span><span class="mf">33</span><span class="p">}</span>
<span class="nx">einst</span><span class="p">[</span><span class="s1">&#39;sími&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">888</span><span class="o">-</span><span class="mf">7777</span>
<span class="nx">einst</span><span class="p">.</span><span class="nx">kennitala</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;111213-3210&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">einst</span><span class="p">[</span><span class="s2">&quot;nafn&quot;</span><span class="p">],</span><span class="w"> </span><span class="nx">einst</span><span class="p">.</span><span class="nx">aldur</span><span class="p">,</span><span class="w"> </span><span class="nx">einst</span><span class="p">.</span><span class="nx">sími</span><span class="p">)</span>
</pre></div>
</div>
<p>Það sama á svo við um Pandas: Það er hægt að nota punkt til að vísa í dálka í
Pandas gagnatöflum. Þetta er nefnt <em>punktritháttur</em> (<em>dot notation</em>). Þannig
mætti hafa sýnidæmið í kafla <a class="reference internal" href="#pandas-gogn"><span class="std std-numref">15.1</span></a> svona:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">kosn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;http://cs.hi.is/python/kosningar.xlsx&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">kosn</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">kosn</span><span class="o">.</span><span class="n">Atkvæði</span><span class="p">)</span>
<span class="n">kosn</span><span class="p">[</span><span class="s2">&quot;Hlutf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kosn</span><span class="o">.</span><span class="n">Atkvæði</span><span class="o">/</span><span class="n">n</span>
<span class="n">display</span><span class="p">(</span><span class="n">kosn</span><span class="p">)</span>
</pre></div>
</div>
<p>og miðparturinn í sýnidæminu í kafla <a class="reference internal" href="#pandas-og-teikningar"><span class="std std-numref">15.5</span></a> yrði:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kosn</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kosn</span><span class="o">.</span><span class="n">Atkvæði</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;tomato&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kosn</span><span class="o">.</span><span class="n">Stafur</span><span class="p">)</span>
</pre></div>
</div>
<p>Það eru ýmsar takmarkanir á punktrithættinum:</p>
<ul class="simple">
<li><p>það er ekki hægt að nota hann til að bæta við dálkum (<code class="docutils literal notranslate"><span class="pre">kosn.Hlutf</span> <span class="pre">=</span>
<span class="pre">kosn.Atkvæði/n</span></code> dugar ekki)</p></li>
<li><p>dálknafnið má ekki vera tala, nafn á Pandas-aðferð eða frátekið Python-nafn (t.d.
hvorki 37, <em>count</em> eða <em>class</em>)</p></li>
<li><p>dálknafnið getur ekki innihaldið bil.</p></li>
</ul>
<p>Engu að síður er punktrithátturinn talsvert notaður; hann sparar þrjá stafi
miðað við hornklofana og er auðveldari að lesa. Hér er ágæt <a class="reference external" href="https://www.dataschool.io/pandas-dot-notation-vs-brackets/">umræða</a> um málið.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../kafli14/" class="btn btn-neutral float-left" title="14 Millikafli: Um reiknifræði og gagnavísindi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../verkefnafyrirsogn/" class="btn btn-neutral float-right" title="V E R K E F N I" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search,
    .wy-nav-top {
        background: #10099F;
    }

    /* Sidebar */
    .wy-nav-side {
        background: #262626;
    }
</style>




</body>
</html>